CREATE TABLE wallets (
    id UUID PRIMARY KEY,
    balance DECIMAL(19,4) NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    version BIGINT NOT NULL DEFAULT 0
);

CREATE TABLE transactions (
    id UUID PRIMARY KEY,
    wallet_id UUID NOT NULL,
    type VARCHAR(20) NOT NULL,
    amount DECIMAL(19,4) NOT NULL,
    balance_after_transaction DECIMAL(19,4) NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'PENDING',
    request_id UUID UNIQUE,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (wallet_id) REFERENCES wallets(id)
);

INSERT INTO wallets (id, balance, created_at, updated_at)
VALUES
    ('00000000-0000-0000-0000-000000000001', 200.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
    ('00000000-0000-0000-0000-000000000002', 250.50, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
    ('00000000-0000-0000-0000-000000000003', 100.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
    ('00000000-0000-0000-0000-000000000004', 250.50, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
    ('00000000-0000-0000-0000-000000000005', 100.00, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
    ('00000000-0000-0000-0000-000000000006', 250.50, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);


INSERT INTO transactions (
    id, wallet_id, type, amount, balance_after_transaction, status, request_id, created_at, updated_at
) VALUES
('10000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'DEPOSIT', 50.00, 150.00, 'SUCCESS', '11111111-1111-1111-1111-111111111111', '2024-01-01 10:00:00', '2024-01-01 10:00:00'),
('10000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'WITHDRAWAL', 30.00, 120.00, 'SUCCESS', '22222222-2222-2222-2222-222222222222', '2024-01-02 12:30:00', '2024-01-02 12:30:00'),
('10000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', 'DEPOSIT', 80.00, 200.00, 'SUCCESS', '33333333-3333-3333-3333-333333333333', '2024-01-03 15:45:00', '2024-01-03 15:45:00');
